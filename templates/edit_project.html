{% extends "layout.html" %}

{% block title %}編輯專案: {{ project.title }}{% endblock %}

{% block content %}
    <div class="form-wrapper-wide">
        
        <div class="form-header-row">
            <div>
                <h2>編輯專案內容</h2>
                <p style="color: #666;">修改專案細節，請確保資訊的準確性。</p>
            </div>
        </div>

        {% if error %}
            <p class="alert alert-error">{{ error }}</p>
        {% endif %}

        <form method="POST" action="{{ url_for('handle_edit_project', project_id=project.id) }}" class="wide-form">
            
            <div class="form-row">
                <div class="form-group col-grow">
                    <label for="title">專案標題 <span style="color:red">*</span></label>
                    <input type="text" id="title" name="title" required 
                           value="{{ project.title }}" 
                           style="font-size: 1.1em;">
                </div>

                <div class="form-group col-fixed">
                    <label for="budget">預算範圍 <span style="color:red">*</span></label>
                    <select id="budget" name="budget" required style="width: 100%; padding: 12px 15px; font-size: 16px; border: 1px solid var(--border-color); border-radius: 5px;">
                        <option value="5,000 以下" {{ 'selected' if project.budget == '5,000 以下' else '' }}>5,000 以下</option>
                        <option value="5,001 - 10,000" {{ 'selected' if project.budget == '5,001 - 1萬' else '' }}>5,001 - 10,000</option>
                        <option value="10,001 - 50,000" {{ 'selected' if project.budget == '1萬 - 5萬' else '' }}>10,001 - 50,000</option>
                        <option value="50,001 - 100,000" {{ 'selected' if project.budget == '5萬 - 10萬' else '' }}>50,001 - 100,000</option>
                        <option value="100,001 - 300,000" {{ 'selected' if project.budget == '10萬 - 30萬' else '' }}>100,001 - 300,000</option>
                        <option value="300,001 - 1,000,000" {{ 'selected' if project.budget == '30萬 - 1,00萬' else '' }}>300,001 - 1,000,000</option>
                        <option value="1,000,001 - 3,000,000" {{ 'selected' if project.budget == '1,00萬 - 3,00萬' else '' }}>1,000,001 - 3,000,000</option>
                        <option value="3,000,000 以上" {{ 'selected' if project.budget == '300萬 以上' else '' }}>3,000,000 以上</option>
                    </select>
                </div>

                <div class="form-group col-fixed">
                    <label for="deadline">提案截止日期 <span style="color:red">*</span></label>
                    <input type="datetime-local" id="deadline" name="deadline" required 
                           value="{{ project.deadline.strftime('%Y-%m-%dT%H:%M') if project.deadline else '' }}">
                </div>
            </div>

            <div class="form-group">
                <label for="description">詳細需求描述 <span style="color:red">*</span></label>
                <textarea id="description" name="description" rows="12" required>{{ project.description }}</textarea>
                <p style="font-size: 0.85em; color: #888; text-align: right; margin-top: 5px;">
                    💡 提示：若專案已有提案，大幅修改需求可能會影響現有提案者的權益。
                </p>
            </div>
            
            <div class="form-footer">
                <a href="{{ url_for('get_project_details', project_id=project.id) }}" 
                   class="btn btn-secondary btn-lg" 
                   style="min-width: 150px; text-align: center;">
                   取消並返回
                </a>

                <button type="submit" class="btn btn-primary btn-lg" style="min-width: 150px;">
                    儲存變更
                </button>
            </div>
        </form>
    </div>
{% endblock %}